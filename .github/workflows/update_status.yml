name: åšå®¢çŠ¶æ€è‡ªåŠ¨æ›´æ–° (Blog Status Auto-Update)

# è§¦å‘æ¡ä»¶ï¼š
on:
  # æ¯å¤© UTC æ—¶é—´ 00:00 è¿è¡Œï¼ˆåŒ—äº¬æ—¶é—´æ—©ä¸Š 8 ç‚¹ï¼‰
  schedule:
    - cron: '59 23 * * 0' 
  
  # å…è®¸æ‰‹åŠ¨è§¦å‘
  workflow_dispatch:

jobs:
  update-readme:
    runs-on: ubuntu-latest
    
    steps:
      - name: ğŸ“ æ£€æŸ¥ä»£ç  (Checkout repository)
        uses: actions/checkout@v4
        # å¿…é¡»è®¾ç½® token æƒé™ï¼Œæ‰èƒ½è®©åç»­æ­¥éª¤æ¨é€ä»£ç 
        with:
          token: ${{ secrets.GITHUB_TOKEN }}

      - name: ğŸ è®¾ç½® Python ç¯å¢ƒ
        uses: actions/setup-python@v5
        with:
          python-version: '3.x'

      - name: ğŸ“¦ å®‰è£…ä¾èµ–åº“
        run: |
          pip install requests feedparser beautifulsoup4 lxml playwright

      - name: ğŸŒ å®‰è£…æµè§ˆå™¨é©±åŠ¨
        # è¿™ä¸€æ­¥æ˜¯ Playwright æ­£å¸¸è¿è¡Œçš„å…³é”®ï¼Œå®ƒå°†å®‰è£… Chromium ç­‰æµè§ˆå™¨
        run: |
          playwright install chromium --with-deps

      - name: ğŸš€ è¿è¡Œæ›´æ–°è„šæœ¬
        run: |
          python script/update_blogs.py

      - name: Commit changes
        uses: stefanzweifel/git-auto-commit-action@v5
        with:
          commit_message: chore:ğŸ¤– è‡ªåŠ¨æ›´æ–°åšå®¢çŠ¶æ€å’Œæœ€åæ›´æ–°æ—¶é—´
          file_pattern: README.md
          # å¦‚æœæ²¡æœ‰æ›´æ”¹ï¼ŒAction é»˜è®¤ä¼šé™é»˜æˆåŠŸï¼Œä¸ä¼šæŠ¥é”™ã€‚
          # å¦‚æœä½ ä¾ç„¶é‡åˆ° Status code 1ï¼Œå¯ä»¥å°è¯•æ·»åŠ ä¸‹é¢è¿™è¡Œï¼š
          skip_fetch: true
